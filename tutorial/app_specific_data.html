<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <title>App specific data demo</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script type="text/javascript" src="../node_modules/web3/dist/web3.js"></script>
    <script type="text/javascript" src="../node_modules/uport-connect/dist/uport-connect.js"></script>
    <script type="text/javascript" src="uportregistry.js"></script>
    <style>
      main { padding: 10px 30px; }
      header { background: #EEE; }
      .btn-sm{ padding: 3px 10px;
               border-radius: 0; }
    </style>
  </head>
  <body>
    <main>
      <header><h1 id="appName">App specific data demo</h1></header>
      <hr/>
      <section>
        <h2>Connect uPort</h2>
        <table>
          <tbody>
            <tr><td><span>uPort Id: </span><span id="uportId"></span></td></tr>
            <tr><td><span>Name: </span><span id="name"></span></td></tr>
            <tr><td><span>App data: </span><span id="appDataRead"></span></td></tr>
          </tbody>
        </table>
        <button class="btn btn-sm btn-primary" id="connectUportBtn" onclick="uportConnect()">Connect uPort</button>
      </section>
      <hr/>
      <section>
        <h2>Set app-specific data</h2>
        <table>
          <thead>
            <tr>
              <td>Data to set:</td>
              <td>Amount:</td>
              <td></td>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><input type="text" id="appDataWrite" size="40" placeholder="Some data here" onchange="updateState()"/></td>
              <td><button class="btn btn-sm btn-success" onclick="setAppData()">Set App Data</button></td>
            </tr>
            <tr>
              <td><span>Transaction Hash(ID): </span><span id="txHashSentEth"></span></td>
            </tr>
          </tbody>
        </table>
      </section>
    </main>
    <script>
      // State and render functions

      const $ = (selector) => document.querySelector(selector)
      let globalState = {};

      const render = function () {
        $('#uportId').innerHTML = globalState.uportId
        $('#name').innerHTML = globalState.name
        $('#appDataRead').innerHTML = globalState.appDataRead
      }

      const updateState = function () {
        globalState.appDataWrite = $('#appDataWrite').value;
        console.log(globalState)
      }

      ////////////////////////////////////////////////


      ////////////////////////////////////////////////

    </script>
    <script type="text/javascript" src="app_specific_data.js"></script>
  </body>
</html>
